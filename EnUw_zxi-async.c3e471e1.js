(("undefined"!=typeof globalThis?globalThis:self).makoChunk_antd=("undefined"!=typeof globalThis?globalThis:self).makoChunk_antd||[]).push([["EnUw_zxi"],{EnUw_zxi:function(e,l,a){"use strict";a.d(l,"__esModule",{value:!0}),a.d(l,"default",{enumerable:!0,get:function(){return s;}});var n=a("8Z0rk4BW");a("iHRkl7M_");var t=a("WyIMPUJp"),i=a("4i_r4BgY"),o=a("qdGieaVz");let r=({value:e,onChange:l})=>{let[a,r]=(0,t.useState)(),s=()=>({dir:"user-dir/",expire:"1577811661",host:"https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload",accessId:"c2hhb2RhaG9uZw==",policy:"eGl4aWhhaGFrdWt1ZGFkYQ==",signature:"ZGFob25nc2hhbw=="}),d=async()=>{try{let e=await s();r(e);}catch(e){o.message.error(e);}};(0,t.useEffect)(()=>{d();},[]);let u=async e=>{if(!a)return!1;let l=1e3*Number(a.expire);l<Date.now()&&await d();let n=e.name.slice(e.name.lastIndexOf(".")),t=Date.now()+n;return e.url=a.dir+t,e;},c={name:"file",fileList:e,action:null==a?void 0:a.host,onChange:({fileList:e})=>{console.log("Aliyun OSS:",e),null==l||l([...e]);},onRemove:a=>{let n=(e||[]).filter(e=>e.url!==a.url);l&&l(n);},data:e=>({key:e.url,OSSAccessKeyId:null==a?void 0:a.accessId,policy:null==a?void 0:a.policy,Signature:null==a?void 0:a.signature}),beforeUpload:u};return(0,n.jsx)(o.Upload,{...c,children:(0,n.jsx)(o.Button,{icon:(0,n.jsx)(i.UploadOutlined,{}),children:"Click to Upload"})});};var s=()=>(0,n.jsx)(o.Form,{labelCol:{span:4},children:(0,n.jsx)(o.Form.Item,{label:"Photos",name:"photos",children:(0,n.jsx)(r,{})})});}}]);
//# sourceMappingURL=EnUw_zxi-async.c3e471e1.js.map